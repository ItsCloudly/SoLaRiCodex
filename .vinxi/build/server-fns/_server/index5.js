import{createComponent as s,mergeProps as z,ssr as a,ssrHydrationKey as t,escape as e,ssrStyleProperty as C,ssrAttribute as u}from"solid-js/web";import{I as k,M as I,s as d,f as y,t as f,m as $,C as v,e as M,d as m}from"./assets/index-Sxd3Q-N6.js";import{createSignal as o}from"solid-js";import"./assets/components-YnJA_VXq.js";var P=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],L=i=>s(k,z(i,{iconNode:P,name:"arrow-right"})),q=L,A=["<div",' class="search-page"><header class="page-header"><!--$-->','<!--/--><h1 class="section-title">Search</h1></header><!--$-->',"<!--/--></div>"],R=["<div",' class="category-selection"><p class="selection-hint">Select a category to start searching</p><div class="categories-grid">',"</div></div>"],x=["<div",' class="category-icon" style="','">',"</div>"],B=["<h3",' class="category-label">',"</h3>"],N=["<p",' class="category-description">',"</p>"],T=["<div",' class="category-arrow">',"</div>"],V=["<div",' class="search-interface"><div class="search-bar"><button class="back-button">&lt;- Back</button><div class="search-input-wrapper"><!--$-->',"<!--/--><!--$-->","<!--/--><!--$-->",'<!--/--></div></div><div class="search-results"><!--$-->',"<!--/--><!--$-->","<!--/--></div></div>"],j=["<div",' class="no-results"><!--$-->','<!--/--><p>No results found for "<!--$-->','<!--/-->"</p></div>'],H=["<div",' class="result-poster">',"</div>"],K=["<div",' class="result-info"><h3>',"</h3><p>",'</p><div class="result-actions">',"</div></div>"],Q=["<img",">"],U=["<div",' class="poster-placeholder"><!--$-->',"<!--/--><!--$-->","<!--/--><!--$-->","<!--/--></div>"];const g=[{id:"movies",label:"Movies",icon:y,color:"var(--accent-primary)",description:"Search for movies to add to your library"},{id:"tv",label:"TV Shows",icon:f,color:"var(--accent-secondary)",description:"Search for TV series and episodes"},{id:"music",label:"Music",icon:$,color:"var(--success)",description:"Search for artists and albums"}];function J(){const[i,_]=o(null),[c,b]=o(""),[p,S]=o([]),[l,h]=o(!1),w=async()=>{if(!(!c()||!i())){h(!0);try{const n=await(await fetch(`/api/search/${i()}?q=${encodeURIComponent(c())}`)).json();S(n.results||[])}catch(r){console.error("Search failed:",r)}finally{h(!1)}}};return s(I,{get children(){return a(A,t(),e(s(d,{size:28,class:"header-icon"})),i()?a(V,t(),e(s(d,{size:20})),e(s(M,{get placeholder(){return`Search ${g.find(r=>r.id===i())?.label.toLowerCase()}...`},get value(){return c()},onInput:b,class:"search-input"})),e(s(m,{variant:"primary",onClick:w,get disabled(){return l()||!c()},get children(){return l()?"Searching...":"Search"}})),p().length===0&&!l()&&c()&&a(j,t(),e(s(d,{size:48})),e(c())),e(p().map(r=>s(v,{class:"result-card",get key(){return r.id},get children(){return[a(H,t(),r.posterPath?a(Q,t()+u("src",e(r.posterPath,!0),!1)+u("alt",e(r.title,!0),!1)):a(U,t(),i()==="movies"&&e(s(y,{size:32})),i()==="tv"&&e(s(f,{size:32})),i()==="music"&&e(s($,{size:32})))),a(K,t(),e(r.title),e(r.overview)||e(r.description),e(s(m,{variant:"primary",size:"sm",children:"Add to Library"})))]}})))):a(R,t(),e(g.map(r=>{const n=r.icon;return s(v,{get key(){return r.id},class:"category-card",onClick:()=>_(r.id),get children(){return[a(x,t(),C("color:",e(r.color,!0)),e(s(n,{size:48}))),a(B,t(),e(r.label)),a(N,t(),e(r.description)),a(T,t(),e(s(q,{size:20})))]}})}))))}})}export{J as default};
