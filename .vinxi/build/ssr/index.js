import{createComponent as e,mergeProps as o,ssr as n,ssrHydrationKey as d,escape as s}from"solid-js/web";import{I as u,M as x,a as p,C as v,b as m,c as h,B as l,d as g,P as N}from"./assets/index-ucQxicSy.js";import{c as A,g as M}from"./assets/api-BB7gk3Fl.js";import{d as f}from"./assets/download-DQHt9Yn2.js";import{h as B}from"./assets/hard-drive-DG1r88qC.js";import"./assets/components-AfoJcVBO.js";import"solid-js";var C=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],D=t=>e(u,o(t,{iconNode:C,name:"clock"})),P=D,F=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],I=t=>e(u,o(t,{iconNode:F,name:"pause"})),y=I,S=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],T=t=>e(u,o(t,{iconNode:S,name:"play"})),U=T,j=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],q=t=>e(u,o(t,{iconNode:j,name:"x"})),$=q,E=["<div",' class="downloads-list">',"</div>"],w=["<div",' class="downloads-list compact">',"</div>"],H=["<div",' class="activity-page"><header class="page-header"><!--$-->','<!--/--><h1 class="section-title">Activity</h1></header><div class="activity-grid"><!--$-->',"<!--/--><!--$-->","<!--/--><!--$-->","<!--/--></div></div>"],K=["<div",' class="empty-state"><!--$-->',"<!--/--><p>No active downloads</p></div>"],L=["<div",' class="download-item"><div class="download-header"><div class="download-title">','</div><div class="download-actions"><!--$-->',"<!--/--><!--$-->",'<!--/--></div></div><div class="download-meta"><!--$-->','<!--/--><span class="meta-item">','</span><span class="meta-item">','</span></div><div class="download-progress"><!--$-->','<!--/--><div class="progress-stats"><span><!--$-->',"<!--/-->%</span><span>","</span><span>ETA: <!--$-->","<!--/--></span></div></div></div>"],b=["<div",' class="empty-state"><!--$-->',"<!--/--><p>No completed downloads</p></div>"],G=["<div",' class="download-item compact"><div class="download-title">','</div><div class="download-meta"><!--$-->','<!--/--><span class="meta-item">',"</span></div></div>"],V=["<div",' class="empty-state"><!--$-->',"<!--/--><p>No failed downloads</p></div>"],X=["<div",' class="download-item compact"><div class="download-title">','</div><div class="download-meta"><!--$-->','<!--/--><span class="meta-item error">',"</span></div></div>"];const J=async()=>{try{const t=await fetch(M("/api/downloads")),i=t.headers.get("content-type")||"";return!t.ok||!i.includes("application/json")?[]:await t.json()}catch{return[]}};function ie(){const t=A(J),i=()=>t()?.filter(a=>["downloading","queued","paused"].includes(a.status))||[],r=()=>t()?.filter(a=>a.status==="completed")||[],c=()=>t()?.filter(a=>a.status==="failed")||[],k=a=>{switch(a){case"downloading":return e(p,{size:16});case"paused":return e(y,{size:16});case"completed":return e(f,{size:16});case"failed":return e($,{size:16});default:return e(P,{size:16})}},z=a=>{switch(a){case"downloading":return"info";case"paused":return"warning";case"completed":return"success";case"failed":return"error";default:return"default"}};return e(x,{get children(){return n(H,d(),s(e(p,{size:28,class:"header-icon"})),s(e(v,{class:"activity-section",get children(){return[e(m,{get children(){return[e(h,{children:"Active Downloads"}),e(l,{variant:"info",get children(){return[i().length," active"]}})]}}),n(E,d(),i().length===0?n(K,d(),s(e(p,{size:48}))):s(i().map(a=>n(L,d(),s(a.title),s(e(g,{variant:"ghost",size:"sm",get children(){return a.status==="paused"?e(U,{size:16}):e(y,{size:16})}})),s(e(g,{variant:"ghost",size:"sm",get children(){return e($,{size:16})}})),s(e(l,{get variant(){return z(a.status)},get children(){return[k(a.status),a.status]}})),s(a.quality),s(_(a.size)),s(e(N,{get value(){return a.progress||0}})),s(a.progress?.toFixed(1)),s(O(a.speed)),s(Q(a.eta))))))]}})),s(e(v,{class:"activity-section",get children(){return[e(m,{get children(){return[e(h,{children:"Completed"}),e(l,{variant:"success",get children(){return r().length}})]}}),n(w,d(),r().length===0?n(b,d(),s(e(f,{size:32}))):s(r().slice(0,10).map(a=>n(G,d(),s(a.title),s(e(l,{variant:"success",children:"Completed"})),s(R(a.completedAt))))))]}})),s(e(v,{class:"activity-section",get children(){return[e(m,{get children(){return[e(h,{children:"Failed"}),e(l,{variant:"error",get children(){return c().length}})]}}),n(w,d(),c().length===0?n(V,d(),s(e(B,{size:32}))):s(c().map(a=>n(X,d(),s(a.title),s(e(l,{variant:"error",children:"Failed"})),s(a.errorMessage)))))]}})))}})}function _(t){if(!t)return"Unknown";const i=["B","KB","MB","GB"];let r=t,c=0;for(;r>=1024&&c<i.length-1;)r/=1024,c++;return`${r.toFixed(1)} ${i[c]}`}function O(t){return t?_(t)+"/s":"0 B/s"}function Q(t){if(!t)return"Unknown";const i=Math.floor(t/3600),r=Math.floor(t%3600/60);return i>0?`${i}h ${r}m`:`${r}m`}function R(t){return t?new Date(t).toLocaleDateString():""}export{ie as default};
