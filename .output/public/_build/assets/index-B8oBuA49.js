import{e as i,z as ge,k as C,p as he,x as l,H as a,B as e,m as p,J as V,L as ve,K as j,A as pe,C as s}from"./components-D0CesRQJ.js";import{I as be,s as L,f as U,t as D,m as F,C as J,e as me,d as K,M as Se}from"./index-BoURuD8o.js";var fe=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],xe=$=>i(be,ge($,{iconNode:fe,name:"arrow-right"})),ye=xe,Ce=s("<div class=search-page><header class=page-header><!$><!/><h1 class=section-title>Search</h1></header><!$><!/>"),ke=s("<div class=category-selection><p class=selection-hint>Select a category to start searching</p><div class=categories-grid>"),ze=s("<div class=category-icon>"),we=s("<h3 class=category-label>"),Ie=s("<p class=category-description>"),Me=s("<div class=category-arrow>"),Le=s("<div class=search-interface><div class=search-bar><button class=back-button>&lt;- Back</button><div class=search-input-wrapper><!$><!/><!$><!/><!$><!/></div></div><div class=search-results><!$><!/><!$><!/>"),Pe=s('<div class=no-results><!$><!/><p>No results found for "<!$><!/>"'),Ae=s("<div class=result-poster>"),Ee=s("<div class=result-info><h3></h3><p></p><div class=result-actions>"),Ne=s("<img>"),Re=s("<div class=poster-placeholder><!$><!/><!$><!/><!$><!/>");const Q=[{id:"movies",label:"Movies",icon:U,color:"var(--accent-primary)",description:"Search for movies to add to your library"},{id:"tv",label:"TV Shows",icon:D,color:"var(--accent-secondary)",description:"Search for TV series and episodes"},{id:"music",label:"Music",icon:F,color:"var(--success)",description:"Search for artists and albums"}];function He(){const[$,P]=C(null),[u,A]=C(""),[E,N]=C([]),[k,R]=C(!1),G=async()=>{if(!(!u()||!$())){R(!0);try{const b=await(await fetch(`/api/search/${$()}?q=${encodeURIComponent(u())}`)).json();N(b.results||[])}catch(g){console.error("Search failed:",g)}finally{R(!1)}}};return i(Se,{get children(){var g=l(Ce),b=g.firstChild,O=b.firstChild,[q,W]=a(O.nextSibling);q.nextSibling;var X=b.nextSibling,[Y,Z]=a(X.nextSibling);return e(b,i(L,{size:28,class:"header-icon"}),q,W),e(g,(()=>{var ee=p(()=>!$());return()=>ee()?(()=>{var m=l(ke),x=m.firstChild,y=x.nextSibling;return e(y,()=>Q.map(n=>{const z=n.icon;return i(J,{get key(){return n.id},class:"category-card",onClick:()=>P(n.id),get children(){return[(()=>{var r=l(ze);return e(r,i(z,{size:48})),V(B=>ve(r,"color",n.color)),r})(),(()=>{var r=l(we);return e(r,()=>n.label),r})(),(()=>{var r=l(Ie);return e(r,()=>n.description),r})(),(()=>{var r=l(Me);return e(r,i(ye,{size:20})),r})()]}})})),m})():(()=>{var m=l(Le),x=m.firstChild,y=x.firstChild,n=y.nextSibling,z=n.firstChild,[r,B]=a(z.nextSibling),re=r.nextSibling,[H,te]=a(re.nextSibling),ie=H.nextSibling,[le,ae]=a(ie.nextSibling),w=x.nextSibling,se=w.firstChild,[T,ne]=a(se.nextSibling),ce=T.nextSibling,[oe,$e]=a(ce.nextSibling);return y.$$click=()=>{P(null),A(""),N([])},e(n,i(L,{size:20}),r,B),e(n,i(me,{get placeholder(){return`Search ${Q.find(c=>c.id===$())?.label.toLowerCase()}...`},get value(){return u()},onInput:A,class:"search-input"}),H,te),e(n,i(K,{variant:"primary",onClick:G,get disabled(){return k()||!u()},get children(){return k()?"Searching...":"Search"}}),le,ae),e(w,(()=>{var c=p(()=>!!(E().length===0&&!k()&&u()));return()=>c()&&(()=>{var d=l(Pe),h=d.firstChild,[t,o]=a(h.nextSibling),_=t.nextSibling,v=_.firstChild,I=v.nextSibling,[S,M]=a(I.nextSibling);return S.nextSibling,e(d,i(L,{size:48}),t,o),e(_,u,S,M),d})()})(),T,ne),e(w,()=>E().map(c=>i(J,{class:"result-card",get key(){return c.id},get children(){return[(()=>{var d=l(Ae);return e(d,(()=>{var h=p(()=>!!c.posterPath);return()=>h()?(()=>{var t=l(Ne);return V(o=>{var _=c.posterPath,v=c.title;return _!==o.e&&j(t,"src",o.e=_),v!==o.t&&j(t,"alt",o.t=v),o},{e:void 0,t:void 0}),t})():(()=>{var t=l(Re),o=t.firstChild,[_,v]=a(o.nextSibling),I=_.nextSibling,[S,M]=a(I.nextSibling),de=S.nextSibling,[_e,ue]=a(de.nextSibling);return e(t,(()=>{var f=p(()=>$()==="movies");return()=>f()&&i(U,{size:32})})(),_,v),e(t,(()=>{var f=p(()=>$()==="tv");return()=>f()&&i(D,{size:32})})(),S,M),e(t,(()=>{var f=p(()=>$()==="music");return()=>f()&&i(F,{size:32})})(),_e,ue),t})()})()),d})(),(()=>{var d=l(Ee),h=d.firstChild,t=h.nextSibling,o=t.nextSibling;return e(h,()=>c.title),e(t,()=>c.overview||c.description),e(o,i(K,{variant:"primary",size:"sm",children:"Add to Library"})),d})()]}})),oe,$e),pe(),m})()})(),Y,Z),g}})}he(["click"]);export{He as default};
