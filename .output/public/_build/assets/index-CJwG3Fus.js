import{e,z as y,x as $,H as a,B as l,m as p,C as u}from"./components-D0CesRQJ.js";import{I as w,a as N,C as M,b as A,c as B,B as f,d as L,P as xe,M as Se}from"./index-BoURuD8o.js";import{c as be,g as ye}from"./api-L-J2XmZW.js";import{d as G}from"./download-BHsaxU8P.js";import{h as we}from"./hard-drive-DHYRnZ8b.js";var Ce=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],ke=i=>e(w,y(i,{iconNode:Ce,name:"clock"})),ze=ke,Ne=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],Me=i=>e(w,y(i,{iconNode:Ne,name:"pause"})),K=Me,Ae=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],Be=i=>e(w,y(i,{iconNode:Ae,name:"play"})),De=Be,Pe=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Fe=i=>e(w,y(i,{iconNode:Pe,name:"x"})),V=Fe,Ie=u("<div class=downloads-list>"),X=u('<div class="downloads-list compact">'),Te=u("<div class=activity-page><header class=page-header><!$><!/><h1 class=section-title>Activity</h1></header><div class=activity-grid><!$><!/><!$><!/><!$><!/>"),Ee=u("<div class=empty-state><!$><!/><p>No active downloads"),Ue=u("<div class=download-item><div class=download-header><div class=download-title></div><div class=download-actions><!$><!/><!$><!/></div></div><div class=download-meta><!$><!/><span class=meta-item></span><span class=meta-item></span></div><div class=download-progress><!$><!/><div class=progress-stats><span><!$><!/>%</span><span></span><span>ETA: <!$><!/>"),je=u("<div class=empty-state><!$><!/><p>No completed downloads"),qe=u('<div class="download-item compact"><div class=download-title></div><div class=download-meta><!$><!/><span class=meta-item>'),He=u("<div class=empty-state><!$><!/><p>No failed downloads"),Le=u('<div class="download-item compact"><div class=download-title></div><div class=download-meta><!$><!/><span class="meta-item error">');const Ge=async()=>{try{const i=await fetch(ye("/api/downloads")),d=i.headers.get("content-type")||"";return!i.ok||!d.includes("application/json")?[]:await i.json()}catch{return[]}};function Ye(){const i=be(Ge),d=()=>i()?.filter(c=>["downloading","queued","paused"].includes(c.status))||[],o=()=>i()?.filter(c=>c.status==="completed")||[],g=()=>i()?.filter(c=>c.status==="failed")||[],O=c=>{switch(c){case"downloading":return e(N,{size:16});case"paused":return e(K,{size:16});case"completed":return e(G,{size:16});case"failed":return e(V,{size:16});default:return e(ze,{size:16})}},Q=c=>{switch(c){case"downloading":return"info";case"paused":return"warning";case"completed":return"success";case"failed":return"error";default:return"default"}};return e(Se,{get children(){var c=$(Te),C=c.firstChild,R=C.firstChild,[D,W]=a(R.nextSibling);D.nextSibling;var b=C.nextSibling,Y=b.firstChild,[P,Z]=a(Y.nextSibling),ee=P.nextSibling,[F,te]=a(ee.nextSibling),ie=F.nextSibling,[le,ne]=a(ie.nextSibling);return l(C,e(N,{size:28,class:"header-icon"}),D,W),l(b,e(M,{class:"activity-section",get children(){return[e(A,{get children(){return[e(B,{children:"Active Downloads"}),e(f,{variant:"info",get children(){return[p(()=>d().length)," active"]}})]}}),(()=>{var _=$(Ie);return l(_,(()=>{var x=p(()=>d().length===0);return()=>x()?(()=>{var t=$(Ee),r=t.firstChild,[n,s]=a(r.nextSibling);return n.nextSibling,l(t,e(N,{size:48}),n,s),t})():d().map(t=>(()=>{var r=$(Ue),n=r.firstChild,s=n.firstChild,v=s.nextSibling,h=v.firstChild,[m,S]=a(h.nextSibling),ae=m.nextSibling,[re,se]=a(ae.nextSibling),k=n.nextSibling,ce=k.firstChild,[I,de]=a(ce.nextSibling),T=I.nextSibling,oe=T.nextSibling,E=k.nextSibling,$e=E.firstChild,[U,ue]=a($e.nextSibling),_e=U.nextSibling,z=_e.firstChild,ge=z.firstChild,[j,ve]=a(ge.nextSibling);j.nextSibling;var q=z.nextSibling,H=q.nextSibling,he=H.firstChild,pe=he.nextSibling,[me,fe]=a(pe.nextSibling);return l(s,()=>t.title),l(v,e(L,{variant:"ghost",size:"sm",get children(){return p(()=>t.status==="paused")()?e(De,{size:16}):e(K,{size:16})}}),m,S),l(v,e(L,{variant:"ghost",size:"sm",get children(){return e(V,{size:16})}}),re,se),l(k,e(f,{get variant(){return Q(t.status)},get children(){return[p(()=>O(t.status)),p(()=>t.status)]}}),I,de),l(T,()=>t.quality),l(oe,()=>J(t.size)),l(E,e(xe,{get value(){return t.progress||0}}),U,ue),l(z,()=>t.progress?.toFixed(1),j,ve),l(q,()=>Ke(t.speed)),l(H,()=>Ve(t.eta),me,fe),r})())})()),_})()]}}),P,Z),l(b,e(M,{class:"activity-section",get children(){return[e(A,{get children(){return[e(B,{children:"Completed"}),e(f,{variant:"success",get children(){return o().length}})]}}),(()=>{var _=$(X);return l(_,(()=>{var x=p(()=>o().length===0);return()=>x()?(()=>{var t=$(je),r=t.firstChild,[n,s]=a(r.nextSibling);return n.nextSibling,l(t,e(G,{size:32}),n,s),t})():o().slice(0,10).map(t=>(()=>{var r=$(qe),n=r.firstChild,s=n.nextSibling,v=s.firstChild,[h,m]=a(v.nextSibling),S=h.nextSibling;return l(n,()=>t.title),l(s,e(f,{variant:"success",children:"Completed"}),h,m),l(S,()=>Xe(t.completedAt)),r})())})()),_})()]}}),F,te),l(b,e(M,{class:"activity-section",get children(){return[e(A,{get children(){return[e(B,{children:"Failed"}),e(f,{variant:"error",get children(){return g().length}})]}}),(()=>{var _=$(X);return l(_,(()=>{var x=p(()=>g().length===0);return()=>x()?(()=>{var t=$(He),r=t.firstChild,[n,s]=a(r.nextSibling);return n.nextSibling,l(t,e(we,{size:32}),n,s),t})():g().map(t=>(()=>{var r=$(Le),n=r.firstChild,s=n.nextSibling,v=s.firstChild,[h,m]=a(v.nextSibling),S=h.nextSibling;return l(n,()=>t.title),l(s,e(f,{variant:"error",children:"Failed"}),h,m),l(S,()=>t.errorMessage),r})())})()),_})()]}}),le,ne),c}})}function J(i){if(!i)return"Unknown";const d=["B","KB","MB","GB"];let o=i,g=0;for(;o>=1024&&g<d.length-1;)o/=1024,g++;return`${o.toFixed(1)} ${d[g]}`}function Ke(i){return i?J(i)+"/s":"0 B/s"}function Ve(i){if(!i)return"Unknown";const d=Math.floor(i/3600),o=Math.floor(i%3600/60);return d>0?`${d}h ${o}m`:`${o}m`}function Xe(i){return i?new Date(i).toLocaleDateString():""}export{Ye as default};
